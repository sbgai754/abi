<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Yomitan — Palette Match (Transparan)</title>
<style>
:root{
  /* background image file harus berada di folder yang sama dengan HTML */
  --bg-image: url("a7bfa9818992675730304eda95cd377a (1).jpg");

  --card-bg: rgba(255,255,255,0.64); /* ubah opasitas di sini (0.4 - 0.85) */
  --panel-bg: rgba(255,255,255,0.60);
  --input-bg: rgba(255,255,255,0.65);
  --muted: #6b7280;
  --accent-purple: #7c5cff;
  --accent-pink: #f47c9b;
  --accent-cyan: #8ad7ff;
  --glass: rgba(255,255,255,0.6);
  --radius:12px;
  --maxw:920px;
  --shadow: 0 10px 30px rgba(15,20,30,0.06);
  --toast-bg: rgba(20,24,30,0.92);
}

/* Reset */
*{box-sizing:border-box}
html,body{
  height:100%;
  margin:0;
  font-family:Inter,system-ui,Arial,sans-serif;
  color:#072233;
  /* TETAPKAN HANYA GAMBAR SEBAGAI BACKGROUND (tanpa overlay hijau) */
  background-image: var(--bg-image);
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-attachment: fixed; /* tetap saat scroll */
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Container pusat */
.container{max-width:var(--maxw);margin:1px auto;padding:20px}

/* Card utama — lebih transparan sehingga image terlihat lewat */
#mainWrap{
  background: var(--card-bg);           /* transparansi dikontrol di var */
  border-radius:var(--radius);
  padding:18px;
  border:1px solid rgba(6,23,38,0.06);
  box-shadow:var(--shadow);
  backdrop-filter: blur(6px) saturate(115%);        /* bantu keterbacaan */
  -webkit-backdrop-filter: blur(6px) saturate(115%);
}

/* Header */
h2{margin:0 0 10px 0;font-weight:700;display:flex;align-items:center;gap:12px}
.brand{
  width:40px;height:40px;border-radius:10px;
  background:linear-gradient(135deg,var(--accent-purple), #b68cff);
  display:grid;place-items:center;font-weight:800;color:#fff;
  box-shadow:0 6px 16px rgba(124,92,255,0.12)
}
h2 a{color:#072233;text-decoration:none;font-size:16px}

/* Textarea / input: juga semi-transparan */
textarea{
  width:100%;
  min-height:120px;
  padding:14px;
  border-radius:10px;
  border:1px solid rgba(6,23,38,0.06);
  background: var(--input-bg);
  color:#072233;
  font-size:15px;
  resize:vertical;
  outline:none;
  box-shadow: inset 0 1px 0 rgba(6,23,38,0.02);
  backdrop-filter: blur(4px);
}
textarea::placeholder{color:rgba(7,34,51,0.32)}

/* Controls */
.controls{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap;align-items:center}
.btn{
  padding:10px 14px;border-radius:10px;border:none;cursor:pointer;background:transparent;color:var(--accent-purple);
  font-weight:700;border:1px solid rgba(124,92,255,0.12);
  transition:all 140ms ease;
}
.btn:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(6,23,38,0.06)}
.btn.red{color:#be123c;border-color:rgba(190,18,60,0.06)}
#markBtnInline{
  background:linear-gradient(90deg,var(--accent-pink), #ffd1d7);
  color:#072233;border:none;padding:10px 14px;border-radius:10px;font-weight:800;
  box-shadow:0 8px 22px rgba(244,124,155,0.12);
}

/* Output area semi-transparan */
#output{
  margin-top:14px;
  min-height:44px;padding:12px 14px;border-radius:10px;
  background: var(--panel-bg);
  border:1px solid rgba(6,23,38,0.04);
  color:#072233;font-size:26px;line-height:1.15;white-space:pre-wrap;overflow-wrap:break-word;
  backdrop-filter: blur(4px);
}

/* Marks panel semi-transparan */
#marksPreview{
  margin-top:16px;border-radius:10px;background:var(--glass);border:1px solid rgba(6,23,38,0.03);
  transition: transform 220ms cubic-bezier(.2,.9,.2,1), opacity 200ms ease, height 240ms ease, padding 200ms ease;
  overflow:hidden;height:0;opacity:0;transform:translateY(-8px);padding:0 8px;
  backdrop-filter: blur(4px);
}
#marksPreview.open{height:auto;opacity:1;transform:translateY(0);padding:12px}

/* marks inner */
.marks-header{display:flex;justify-content:space-between;align-items:center;padding:6px 4px}
.marks-list{max-height:260px;overflow:auto;padding:8px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.54), rgba(255,255,255,0.46));}
.mark-item{background: rgba(255,255,255,0.6);padding:10px;border-radius:8px;margin-bottom:10px;border:1px solid rgba(6,23,38,0.04)}
.mark-meta{font-size:12px;color:var(--muted);margin-bottom:6px}
.mark-text{font-size:14px;color:#072233;white-space:pre-wrap}
.mark-actions{margin-top:8px;display:flex;gap:8px}
.mark-load{padding:8px 10px;border-radius:8px;border:none;background:linear-gradient(180deg,var(--accent-cyan),#53c9ff);color:white;font-weight:700}
.mark-del{padding:8px 10px;border-radius:8px;border:none;background:linear-gradient(180deg,#fb7185,#f43f5e);color:white;font-weight:700}

/* Single toast slot */
#toastHolder{position:fixed;left:18px;bottom:84px;z-index:1200;pointer-events:none;display:block;}
#toast{pointer-events:auto;min-width:160px;padding:12px 14px;border-radius:12px;background:var(--toast-bg);color:#fff;font-weight:700;transform:translateY(10px) scale(.98);opacity:0;transition:transform 220ms,opacity 160ms;}
#toast.show{transform:translateY(0) scale(1);opacity:1}

/* Floating buttons */
#toggleMarksBtn,#fullscreenBtn{position:fixed;width:52px;height:52px;border-radius:12px;border:none;background:#ffffff;display:grid;place-items:center;font-size:20px;z-index:1100;box-shadow:0 8px 26px rgba(6,23,38,0.08);cursor:pointer;}
#toggleMarksBtn{left:18px;bottom:18px;color:var(--accent-purple)}
#fullscreenBtn{right:18px;bottom:18px;color:var(--muted)}

/* Responsive */
@media (max-width:720px){
  #output{font-size:30px}
  .btn{padding:9px 12px}
  textarea{min-height:100px}
  #toggleMarksBtn,#fullscreenBtn{width:44px;height:44px}
}
</style>
</head>
<body>
<div class="container">
  <div id="mainWrap">
    <h2>
      <div class="brand">ヤ</div>
      <a href="#">Web By アビ君 (ABI kun)</a>
    </h2>

    <textarea id="input" placeholder="Tempelkan teks di sini..."></textarea>

    <div class="controls">
      <button class="btn" id="pasteBtn">Tempel</button>
      <button class="btn red" id="resetBtn">Bersihkan</button>
      <button id="markBtnInline" title="Simpan ke bookmark">Simpan</button>
    </div>

    <div id="output" aria-live="polite"></div>

    <div id="marksPreview" aria-hidden="true">
      <div class="marks-header">
        <strong id="marksHeaderTitle">Bookmark (0)</strong>
        <button class="btn" id="clearMarksBtn" style="padding:6px 10px;font-weight:600">Hapus Semua</button>
      </div>
      <div class="marks-list" id="marksList">
        <div id="noMarksMsg" style="color:var(--muted)">Belum ada bookmark.</div>
      </div>
    </div>

  </div>
</div>

<!-- single toast slot -->
<div id="toastHolder" aria-hidden="true">
  <div id="toast" role="status" aria-live="polite"></div>
</div>

<!-- floating buttons -->
<button id="toggleMarksBtn" title="Tampilkan / sembunyikan bookmark">★</button>
<button id="fullscreenBtn" title="Layar penuh">⛶</button>

<script>
/* (JS sama seperti sebelumnya) */
const KEY = "yomitan_marks_v1";
const input = document.getElementById("input");
const output = document.getElementById("output");
const pasteBtn = document.getElementById("pasteBtn");
const resetBtn = document.getElementById("resetBtn");
const markBtnInline = document.getElementById("markBtnInline");
const marksPreview = document.getElementById("marksPreview");
const marksList = document.getElementById("marksList");
const noMarksMsg = document.getElementById("noMarksMsg");
const clearMarksBtn = document.getElementById("clearMarksBtn");
const toggleMarksBtn = document.getElementById("toggleMarksBtn");
const fullscreenBtn = document.getElementById("fullscreenBtn");
const marksHeaderTitle = document.getElementById("marksHeaderTitle");
const toastHolder = document.getElementById("toastHolder");
const toast = document.getElementById("toast");

marksPreview.classList.remove("open");
marksPreview.setAttribute("aria-hidden","true");

let toastTimer = null;
function nowISO(){ return new Date().toISOString(); }
function niceDate(t){ try { return new Date(t).toLocaleString(); } catch(e){ return t; } }
function loadMarks(){ try { return JSON.parse(localStorage.getItem(KEY) || "[]"); } catch(e){ return []; } }
function saveMarks(a){ localStorage.setItem(KEY, JSON.stringify(a)); }
function escapeHtml(s){ if (s == null) return ""; return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"); }

input.addEventListener("input", ()=> output.textContent = input.value );

pasteBtn.onclick = async ()=>{ try{ const t = await navigator.clipboard.readText(); input.value = t; output.textContent = t; }catch{ alert("Izin clipboard ditolak."); } };
resetBtn.onclick = ()=>{ input.value = ""; output.textContent = ""; };

function showToast(message, duration = 1400){
  if (toastTimer) { clearTimeout(toastTimer); toastTimer = null; }
  toast.textContent = message;
  toast.classList.add("show");
  toastHolder.setAttribute("aria-hidden","false");
  toastTimer = setTimeout(()=>{
    toast.classList.remove("show");
    setTimeout(()=> { toastHolder.setAttribute("aria-hidden","true"); }, 180);
    toastTimer = null;
  }, duration);
}

markBtnInline.onclick = ()=>{
  const t = (input.value || "").trim();
  if (!t){ showToast("Tidak ada teks untuk disimpan."); markBtnInline.style.transform = "translateY(-4px)"; setTimeout(()=> markBtnInline.style.transform = "", 120); return; }
  let arr = loadMarks();
  const normalized = t.replace(/\r\n/g,"\n").trim();
  const idx = arr.findIndex(i => (i.text || "").replace(/\r\n/g,"\n").trim() === normalized);
  if (idx !== -1){ showToast("Item sudah ada di bookmark."); markBtnInline.style.transform = "translateX(-6px)"; setTimeout(()=> markBtnInline.style.transform = "translateX(6px)",80); setTimeout(()=> markBtnInline.style.transform = "",160); return; }
  arr.unshift({ id: Date.now()+"-"+Math.random().toString(36).slice(2,6), text: t, savedAt: nowISO() });
  saveMarks(arr); renderMarks();
  markBtnInline.style.transform = "scale(.98)"; setTimeout(()=> markBtnInline.style.transform = "",120);
  showToast("Berhasil disimpan.");
};

function renderMarks(){
  const arr = loadMarks();
  marksHeaderTitle.textContent = `Bookmark (${arr.length})`;
  marksList.querySelectorAll(".mark-item").forEach(n=>n.remove());
  if (!arr.length){ noMarksMsg.style.display = "block"; return; }
  noMarksMsg.style.display = "none";
  arr.forEach(m=>{
    const item = document.createElement("div"); item.className = "mark-item";
    const meta = document.createElement("div"); meta.className = "mark-meta"; meta.textContent = niceDate(m.savedAt);
    const textDiv = document.createElement("div"); textDiv.className = "mark-text"; textDiv.innerHTML = escapeHtml(m.text).replace(/\n/g,"<br>");
    const actions = document.createElement("div"); actions.className = "mark-actions";
    const loadBtn = document.createElement("button"); loadBtn.className = "mark-load"; loadBtn.textContent = "Muat";
    loadBtn.onclick = ()=>{ input.value = m.text; output.textContent = m.text; marksPreview.classList.remove("open"); marksPreview.setAttribute("aria-hidden","true"); showToast("Konten dimuat."); };
    const delBtn = document.createElement("button"); delBtn.className = "mark-del"; delBtn.textContent = "Hapus";
    delBtn.onclick = ()=>{ saveMarks(loadMarks().filter(x=>x.id!==m.id)); renderMarks(); showToast("Item dihapus."); };
    actions.appendChild(loadBtn); actions.appendChild(delBtn);
    item.appendChild(meta); item.appendChild(textDiv); item.appendChild(actions);
    marksList.appendChild(item);
  });
}

clearMarksBtn.onclick = ()=>{ if(confirm("Hapus semua bookmark?")){ localStorage.removeItem(KEY); renderMarks(); showToast("Semua bookmark telah dihapus."); } };

toggleMarksBtn.onclick = ()=>{ const isOpen = marksPreview.classList.toggle("open"); marksPreview.setAttribute("aria-hidden", isOpen ? "false" : "true"); if (isOpen) renderMarks(); };

fullscreenBtn.onclick = ()=>{ if (!document.fullscreenElement){ document.documentElement.requestFullscreen(); fullscreenBtn.textContent="×"; } else { document.exitFullscreen(); fullscreenBtn.textContent="⛶"; } };

renderMarks();
</script>
</body>
</html>
